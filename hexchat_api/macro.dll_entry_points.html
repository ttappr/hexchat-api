<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `dll_entry_points` macro in crate `hexchat_api`."><meta name="keywords" content="rust, rustlang, rust-lang, dll_entry_points"><title>hexchat_api::dll_entry_points - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc macro"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../hexchat_api/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><p class="location"><a href="index.html">hexchat_api</a></p><script>window.sidebarCurrent = {name: "dll_entry_points", ty: "macro", relpath: ""};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/hexchat_api/hexchat_entry_points.rs.html#85-122" title="goto source code">[src]</a></span><span class="in-band">Macro <a href="index.html">hexchat_api</a>::<wbr><a class="macro" href="">dll_entry_points</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><div class="example-wrap"><pre class="rust macro">
<span class="macro">macro_rules</span><span class="macro">!</span> <span class="ident">dll_entry_points</span> {
    ( <span class="macro-nonterminal">$</span><span class="macro-nonterminal">info</span>:<span class="ident">ident</span>, <span class="macro-nonterminal">$</span><span class="macro-nonterminal">init</span>:<span class="ident">ident</span>, <span class="macro-nonterminal">$</span><span class="macro-nonterminal">deinit</span>:<span class="ident">ident</span> ) <span class="op">=</span><span class="op">&gt;</span> { ... };
}</pre></div>
</div><div class="docblock"><p><code>dll_entry_points()</code> makes it very easy to set up your plugin's DLL
interface required by the Hexchat loader. This macro generates the necessary
DLL entry points that Hexchat looks for when a DLL is being loaded.
Normal Rust functions having the required signatures can be passed to the
macro like so:</p>
<p><code>dll_entry_points!( my_info_func, my_init_func, my_deinit_func )</code></p>
<p>That's it. You don't need to worry about how to export your Rust functions
to interface with the C environment of Hexchat. This macro does it all for
you.</p>
<h1 id="the-signatures-for-the-functions-are" class="section-header"><a href="#the-signatures-for-the-functions-are">The signatures for the functions are:</a></h1>
<ul>
<li><code>my_info_func  ()                 -&gt; PluginInfo;</code></li>
<li><code>my_init_func  (&amp;'static Hexchat) -&gt; i32;</code></li>
<li><code>my_deinit_func(&amp;'static Hexchat) -&gt; i32;</code></li>
</ul>
<p>The <strong>info function</strong> should create an instance of <code>PluginInfo</code> by calling
its constructor with information about the plugin as parameters.</p>
<p>The <strong>init function</strong> is typically where you'll want to register your
plugin's commands. Hook commands are provided by the <code>&amp;Hexchat</code> reference
provided as a paramter when your init function is called by Hexchat. The
init function needs to return either 0 (good) or 1 (error).</p>
<p>The <strong>deinit function</strong> gets called when your plugin is unloaded. Return a
0 (good) or 1 (error). Any cleanup actions needed to be done can be done
here. However, when your  DLL is unloaded by Hexchat, all its hooked
commands are unhooked automatically - so you don't need to worry about
managing the <code>Hook</code> objects returned by the hook commands unless you're
plugin needs to for some reason. If your plugin creates any static
variables, This is the place to drop their values, for example:
<code>MY_STATIC_VAR = None;</code></p>
</div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "hexchat_api";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>